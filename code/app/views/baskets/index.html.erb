<h1 class="stamp">Baskets</h1>

<% if notice %>
  <p class="alert alert-success">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <%= notice %>
  </p>
<% end %>

<table class="table">
  <tr>
    <th>#</th>
    <th>Shopper</th>
    <th>Items</th>
    <th>Total Price</th>
    <th>Status</th>
    <th></th>
  </tr>

<% @baskets.each do |basket| %>
  <tr>
    <td><%= basket.id %></td>
    <td><%= basket.shopper %></td>
    <td>
      <ul class="unstyled">
      <% basket.items.each do |item| %>
        <li><%= item.product.name %></li>
      <% end %>
      </ul>
    </td>
    <td><%= number_to_currency(basket.total_price, :unit => "Â£") %></td>
    <td><%= basket.status %></td>
    <td class="actions">
      <%= link_to 'Edit', edit_basket_path(basket), :class => 'btn' %>
      <%= link_to 'Delete', basket, confirm: 'Are you sure?', method: :delete, :class => 'btn btn-danger' %>
    </td>
  </tr>
<% end %>
</table>